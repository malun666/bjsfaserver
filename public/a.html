<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
<iframe id="geoPage" width=0 height=0 frameborder=0  style="display:none;" scrolling="no"
src="https://apis.map.qq.com/tools/geolocation?key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77&referer=myapp">
</iframe>

<script>
    var loc;
window.addEventListener('message', function(event) {
    // 接收位置信息
     loc = event.data;
    console.log('location', loc);
}, false)       ;
setTimeout(function() {
    if (!loc) {
       console.log('定位超时')
    }
}, 6000) 
</script>
</body>
</html>